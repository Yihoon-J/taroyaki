<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAROYAKKI</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <link rel="stylesheet" href="tarotchat_style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
    <style>
        body { 
            font-family: 'Pretendard Variable'; 
            margin: 0; padding: 0; 
            display: flex;
            overflow: hidden;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="mainContent">
        <div id="sidebar" class="expanded">
            <div id="TitleBox">
                <h1 id="MainTitle">TAROYAKKI</h1>
                <button id="collapseBtn">
                    <span id="collapseBtnIcon"></span>
                </button>
            </div>
            <div class="divLine"></div>
            <button id="newChatButton">
                <span id="newChatButtonIcon"></span>
                <span id=""newChatButtonText">새 대화 시작</span>
            </button>        
            <div class="divLine"></div>
            <div id="sessionList"></div>
            <button id="SettingsButton">
                <span id="SettingsButtonIcon"></span>
                <span id="SettingsButtonText">설정</span>
            </button>
        </div>
        <div id="collapsedSidebar" class="collapsed" style="display: none;">
            <div id="collapsedlogo">T</div>
            <button id="expandBtn">
                <div id="expandBtnIcon"></div>
            </button>
            <div class="divLine"></div>
            <button id="collapsedNewChatBtn">
                <div id="collapsedNewChatBtnIcon"></div>
            </button>
            <div class="divLine"></div>
            <button id="collapsedSettingsBtn">
                <div id="collapsedSettingsBtnIcon"></div>
            </button>
          </div>
          <div id="settings" class="modalA">
            <div class="modalA-content">
                <div class="modalA-header">
                    <h2 id="modalAtitle">Setting</h2>
                    <button class="settingsclose">
                        <div id="settingscloseicon"></div>
                    </button>
                </div>
                <div class="divLine"></div>
                <div id="settingsbody">
                    <div class="modalAbody">
                        <div class="emptyspace"></div>
                        <div class="settingsbodytitle">계정 정보</div>
                        <span id="userDetails" class="settingsbodytext"></span>
                        <div class="emptyspace"></div>
                        <div class="settingsbodytitle">데이터 관리</div>
                        <span id="exportbtn" class="settingsbodytext">* 준비중입니다.</span>
                        <span id="reset" class="settingsbodytext"></span>
                        <div class="emptyspace"></div>
                        <div class="settingsbodytitle">크레딧</div>
                        <a id="heemcredit" class="settingsbodytext" href="https://www.linkedin.com/in/%ED%9D%AC%EA%B2%BD-%EA%B9%80-780a4b23b/">heem</a>
                        <span id="creditseparator" class="settingsbodytext"> /</span>
                        <a id="yihooncredit"class="settingsbodytext" href="https://www.linkedin.com/in/yihoon-j/">yihoon</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="profileModal" class="modalB">
            <div class="modalB-content">
                <button id="settingbtnB">Setting</button>
                <button id="logoutbtn">Logout</button>
            </div>
        </div>
        <div id="deleteSessionModal" class="modalC">
            <div class="modalC-content">
            <span class="close">&times;</span>
            <h2>세션 삭제 확인</h2>
            <p>대화를 삭제할까요?</p>
            <button id="cancelDelete">취소</button>
            <button id="confirmDelete">삭제하기</button>
            </div>
        </div>
        <div id="serviceguide">
            <div id="GuideTitle">타로야끼에게 물어보는 방법</div>
            <div id="Guide1">
                <div id="guide1title">내가 현재 처해 있는 상황과 고민을 자세히 작성할수록 리딩이 정확해져요.</div>
                <div id="guide1p1">
                    (X)연애운을 알려줘<br>(X)취직할 수 있을까?
                </div>
                <ul id="guide1p2">
                    <li id="g1p2b1">면접본 두 곳에서 합격했는데, 하나는 대기업이고 나랑 잘 맞는 직무가 아니야. 다른 하나는 스타트업이지만 내가 잘 할 것 같은 직무야. 어느 기업을 고르는 게 좋을까?</li>
                    <li id="g1p2b2">나는 프로덕트 디자이너로 취업을 준비 중인데, 올 하반기에 내가 원하는 기업에 취업할 수 있을지 궁금해.    </li>
                </ul>
            </div>
            <div id="Guide2">
                <div id="guide2title">추가적인 정보를 알고 싶다면 '조언'이나 '추가질문'을 질문해보아요.</div>
                <div id="guide2p1">
                    어쩌구<br>저쩌구
                </div>
                <ul id="guide2p2">
                    <li id="g2p2b1">마 니</li>
                    <li id="g2p2b2">서마터폰 중독이다</li>
                </ul>
            </div>
            <div id="Guide3">
                <div id="guide3title">대화가 너무 길어지면 답변이 부정확해질 수 있어요.</div>
                <div id="guide3p1">
                    대화가 길면 타로야끼는 초반 대화를 잘 기억하지 못해요.<br>최소한의 대화로 자신의 상황에 대해 최대한 많은 정보를 제공해 주세요.
                </div>
            </div>
        </div>
        <div id="contentWrapper">
            <div id="chatBox"></div>
                <button id="ProfileBtn"></button>
            <div id="inputArea">
                <input type="text" id="messageInput" placeholder="고민상황을 자유롭게 물어보세요.">
                <button id="SendButton">
                    <div id="SendButtonIcon"></div>
                </button>
            </div>
            <div id="warningmsg">
                <p>타로야끼는 아직 익히는 중이에요. 답변에서 실수가 있을 수 있어요.</p>
            </div>
        </div>
    </div>
    <script type="importmap">
        {
          "imports": {
            "aws-amplify": "https://cdn.jsdelivr.net/npm/aws-amplify@5.3.12/dist/esm/index.mjs"
          }
        }
    </script>
    <script src="/config.js"></script>
    <script type="module" src="tarotchat_service.js"></script>
    <script type="module">
        import { initializePage, initializeEventListeners, startNewChat, sendMessage, logout } from './tarotchat_service.js';
        
        // Make functions globally available
        window.startNewChat = startNewChat;
        window.sendMessage = sendMessage;
        window.logout = logout;
    </script>
</body>
</html>